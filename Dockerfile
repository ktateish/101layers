FROM golang:latest AS builder
WORKDIR /src
COPY main.go .
RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o docker-entry .
RUN touch empty

FROM scratch
COPY --from=builder /src/docker-entry /

COPY --from=builder /src/empty /1
COPY --from=builder /src/empty /2
COPY --from=builder /src/empty /3
COPY --from=builder /src/empty /4
COPY --from=builder /src/empty /5
COPY --from=builder /src/empty /6
COPY --from=builder /src/empty /7
COPY --from=builder /src/empty /8
COPY --from=builder /src/empty /9
COPY --from=builder /src/empty /10
COPY --from=builder /src/empty /11
COPY --from=builder /src/empty /12
COPY --from=builder /src/empty /13
COPY --from=builder /src/empty /14
COPY --from=builder /src/empty /15
COPY --from=builder /src/empty /16
COPY --from=builder /src/empty /17
COPY --from=builder /src/empty /18
COPY --from=builder /src/empty /19
COPY --from=builder /src/empty /20
COPY --from=builder /src/empty /21
COPY --from=builder /src/empty /22
COPY --from=builder /src/empty /23
COPY --from=builder /src/empty /24
COPY --from=builder /src/empty /25
COPY --from=builder /src/empty /26
COPY --from=builder /src/empty /27
COPY --from=builder /src/empty /28
COPY --from=builder /src/empty /29
COPY --from=builder /src/empty /30
COPY --from=builder /src/empty /31
COPY --from=builder /src/empty /32
COPY --from=builder /src/empty /33
COPY --from=builder /src/empty /34
COPY --from=builder /src/empty /35
COPY --from=builder /src/empty /36
COPY --from=builder /src/empty /37
COPY --from=builder /src/empty /38
COPY --from=builder /src/empty /39
COPY --from=builder /src/empty /40
COPY --from=builder /src/empty /41
COPY --from=builder /src/empty /42
COPY --from=builder /src/empty /43
COPY --from=builder /src/empty /44
COPY --from=builder /src/empty /45
COPY --from=builder /src/empty /46
COPY --from=builder /src/empty /47
COPY --from=builder /src/empty /48
COPY --from=builder /src/empty /49
COPY --from=builder /src/empty /50
COPY --from=builder /src/empty /51
COPY --from=builder /src/empty /52
COPY --from=builder /src/empty /53
COPY --from=builder /src/empty /54
COPY --from=builder /src/empty /55
COPY --from=builder /src/empty /56
COPY --from=builder /src/empty /57
COPY --from=builder /src/empty /58
COPY --from=builder /src/empty /59
COPY --from=builder /src/empty /60
COPY --from=builder /src/empty /61
COPY --from=builder /src/empty /62
COPY --from=builder /src/empty /63
COPY --from=builder /src/empty /64
COPY --from=builder /src/empty /65
COPY --from=builder /src/empty /66
COPY --from=builder /src/empty /67
COPY --from=builder /src/empty /68
COPY --from=builder /src/empty /69
COPY --from=builder /src/empty /70
COPY --from=builder /src/empty /71
COPY --from=builder /src/empty /72
COPY --from=builder /src/empty /73
COPY --from=builder /src/empty /74
COPY --from=builder /src/empty /75
COPY --from=builder /src/empty /76
COPY --from=builder /src/empty /77
COPY --from=builder /src/empty /78
COPY --from=builder /src/empty /79
COPY --from=builder /src/empty /80
COPY --from=builder /src/empty /81
COPY --from=builder /src/empty /82
COPY --from=builder /src/empty /83
COPY --from=builder /src/empty /84
COPY --from=builder /src/empty /85
COPY --from=builder /src/empty /86
COPY --from=builder /src/empty /87
COPY --from=builder /src/empty /88
COPY --from=builder /src/empty /89
COPY --from=builder /src/empty /90
COPY --from=builder /src/empty /91
COPY --from=builder /src/empty /92
COPY --from=builder /src/empty /93
COPY --from=builder /src/empty /94
COPY --from=builder /src/empty /95
COPY --from=builder /src/empty /96
COPY --from=builder /src/empty /97
COPY --from=builder /src/empty /98
COPY --from=builder /src/empty /99
COPY --from=builder /src/empty /100
COPY --from=builder /src/empty /101
COPY --from=builder /src/empty /102
COPY --from=builder /src/empty /103
COPY --from=builder /src/empty /104
COPY --from=builder /src/empty /105
COPY --from=builder /src/empty /106
COPY --from=builder /src/empty /107
COPY --from=builder /src/empty /108
COPY --from=builder /src/empty /109
COPY --from=builder /src/empty /110
COPY --from=builder /src/empty /111
COPY --from=builder /src/empty /112
COPY --from=builder /src/empty /113
COPY --from=builder /src/empty /114
COPY --from=builder /src/empty /115
COPY --from=builder /src/empty /116
COPY --from=builder /src/empty /117
COPY --from=builder /src/empty /118
COPY --from=builder /src/empty /119
COPY --from=builder /src/empty /120
CMD ["/docker-entry"]
